class Atm:
    def __init__(self):
        # Initializes the ATM with a default PIN and balance, then immediately starts the menu.
        self.__pin = "1234"
        self.__balance = 100000
        self.__menu()  # Start the ATM menu immediately after the object is created

    def __menu(self):
        # Displays the ATM menu options and processes user input in a continuous loop until the user decides to exit.
        while True:
            print("\nWelcome to JJ-ATM")
            print("1. Generate PIN")
            print("2. Change PIN")
            print("3. Check Balance")
            print("4. Withdraw")
            print("5. Deposit")
            print("6. Exit")

            # Get the user's choice of service
            choice = input("Choose a service: ")
            print(f"User chose: {choice}")

            # Call the appropriate method based on the user's choice
            if choice == '1':
                self.__generate_pin()#Allows the user to generate a new PIN if the default PIN is still in place.
            elif choice == '2':
                self.__change_pin()# Allows the user to change their PIN after verifying the current one.
            elif choice == '3':
                self.__check_balance()# Displays the user's current balance after successful PIN verification.
            elif choice == '4':
                self.__withdraw()# Enables the user to withdraw funds, ensuring the amount is valid and in multiples of 100.
            elif choice == '5':
                self.__deposit()# Enables the user to deposit funds, ensuring the amount is valid and in multiples of 100.
            elif choice == '6':
                # Exit the ATM
                print("Thank you for using the JJ-ATM.")
                break
            else:
                # Handle invalid menu choices
                print("Please try again.")

    def __get_pin(self):
        # Prompts the user to enter a 4-digit PIN and ensures that it's valid.
        pin = input("Enter a 4-digit PIN: ")
        if len(pin) == 4 and pin.isdigit():
            return pin
        else:
            print("Invalid PIN.")
            return None

    def __verify_pin(self):
        # Confirms that the entered PIN matches the stored PIN before allowing access to sensitive functions.
        (f"Stored PIN: {self.__pin}")  # Debugging line to show the stored PIN
        pin = input("Enter your current PIN: ")
        if pin == self.__pin:
            return True
        else:
            print("Incorrect PIN.")
            return False

    def __generate_pin(self): #Allows the user to generate a new PIN if the default PIN is still in place.
        if self.__pin != "1234":
            print("PIN is already set. Change PIN for a new one.")
            return

        pin = self.__get_pin()
        if pin:
            confirm_pin = input("Confirm 4-digit PIN: ")
            if pin == confirm_pin:
                self.__pin = pin  # Set the new PIN
                print("PIN generated successfully.")
            else:
                print("PINs don't match. Please try again.")

    def __change_pin(self):
        # This method allows the user to change their PIN after verifying the current PIN
        if not self.__verify_pin():
            return

        new_pin = self.__get_pin()
        if new_pin:
            confirm_pin = input("Confirm new 4-digit PIN: ")
            if new_pin == confirm_pin:
                self.__pin = new_pin  # Update to the new PIN
                print("PIN changed successfully.")
            else:
                print("PINs don't match. Please try again.")

    def __check_balance(self):
        # This method checks and displays the user's balance after verifying the PIN
        if self.__verify_pin():
            print(f"Your current balance is: ${self.__balance}")

    def __withdraw(self):
        # This method allows the user to withdraw money after verifying the PIN
        if not self.__verify_pin():
            return

        try:
            amount = int(input("Enter amount to withdraw (multiples of 100): "))
            if amount % 100 == 0 and amount <= self.__balance:
                self.__balance -= amount  # Deduct the withdrawal amount from the balance
                print(f"Withdrawal successful. Your new balance is: ${self.__balance}")
            else:
                print("Invalid amount.")
        except ValueError:
            print("Please enter a valid amount.")

    def __deposit(self):
        # This method allows the user to deposit money after verifying the PIN
        if not self.__verify_pin():
            return

        try:
            amount = int(input("Enter amount to deposit (multiples of 100): "))
            if amount % 100 == 0 and amount > 0:
                self.__balance += amount  # Add the deposit amount to the balance
                print(f"Deposit successful. Your new balance is: ${self.__balance}")
            else:
                print("Ensure a valid amount, multiple's of 100.")
        except ValueError:
            print("Please enter a valid amount.")

atm = Atm()  # This will automatically start the menu loop
